        emitError(llvm::Twine("multiple definitions of namespace '") +
                  Namespace.Name + "'");
        continue;
      }

      convertNamespaceContext(CtxID, Namespace, SwiftVersion);
    }

    // Write all global variables.
    llvm::StringSet<> KnownGlobals;
    for (const auto &Global : TLItems.Globals) {
      // Check for duplicate global variables.
      if (!KnownGlobals.insert(Global.Name).second) {
        emitError(llvm::Twine("multiple definitions of global variable '") +
                  Global.Name + "'");
        continue;
      }

      GlobalVariableInfo GVI;
      convertAvailability(Global.Availability, GVI, Global.Name);
      GVI.setSwiftPrivate(Global.SwiftPrivate);
      GVI.SwiftName = std::string(Global.SwiftName);
      if (Global.Nullability)
        GVI.setNullabilityAudited(*Global.Nullability);
      GVI.setType(std::string(Global.Type));
      Writer.addGlobalVariable(Ctx, Global.Name, GVI, SwiftVersion);
    }

    // Write all global functions.
    llvm::StringSet<> KnownFunctions;
    for (const auto &Function : TLItems.Functions) {
      // Check for duplicate global functions.
      if (!KnownFunctions.insert(Function.Name).second) {
        emitError(llvm::Twine("multiple definitions of global function '") +
                  Function.Name + "'");
        continue;
      }

      GlobalFunctionInfo GFI;
      convertAvailability(Function.Availability, GFI, Function.Name);
      GFI.setSwiftPrivate(Function.SwiftPrivate);
      GFI.SwiftName = std::string(Function.SwiftName);
      convertParams(Function.Params, GFI);
      convertNullability(Function.Nullability, Function.NullabilityOfRet, GFI,
                         Function.Name);
      GFI.ResultType = std::string(Function.ResultType);
      GFI.setRetainCountConvention(Function.RetainCountConvention);
      Writer.addGlobalFunction(Ctx, Function.Name, GFI, SwiftVersion);
    }

